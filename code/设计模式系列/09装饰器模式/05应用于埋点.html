<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>埋点</title>
</head>
<body>
  <button data-name='whoami' id='whoami'>我是谁</button>
  <button data-name='whereiam' id='whereiam'>我在哪里</button>

  <script>
    let whoami = document.getElementById('whoami')
    let whereiam = document.getElementById('whereiam')

    Function.prototype.after = function (afterFn) {
      let _this = this
      return function () {
        _this.apply(this,arguments)
        afterFn.apply(this,arguments)
      }
    }

    function clickMe(){
      console.log('点击了。。。'+this.dataset.name)
    }

    clickMe = clickMe.after(function(){
      console.log('点击之后，新添加的一些逻辑：',this.dataset.name)
      let img = new Image()
      img.src = `http://localhost:3001/report?name=${this.dataset.name}`
    })

    Array.from(document.querySelectorAll('button')).forEach(button => {
      button.addEventListener('click',clickMe)
    })
  </script>
</body>
</html>